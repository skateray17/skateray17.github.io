var skatLib=function(e){var t={};function s(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=2)}([function(e,t){let s=1;e.exports=class{constructor(e,t,n,o,a=[]){this.author=e,this.publDate=new Date(t),this.likes=a,this._id=(s++).toString(),this.description=n,this.photoLink=o,this.tags=n.match(/#[^\s#]*/g)}validate(){return!!("string"==typeof this.author&&"string"==typeof this.description&&this.description&&this.publDate&&this.author&&this.photoLink&&"string"==typeof this.photoLink&&this.likes instanceof Array&&this.likes.reduce((e,t)=>"string"==typeof t,!0)&&"string"==typeof this._id&&this.publDate instanceof Date)}}},function(e,t,s){const n=s(0);e.exports={PhotoPosts:class{constructor(){this.arr=[]}addPost(e){return e instanceof n&&e.validate()?!this.arr.find(t=>t._id===e._id)&&(this.arr.push(e),this.arr.sort((e,t)=>t.publDate-e.publDate),!0):(console.log("Incorrect post"),!1)}getPhotoPosts(e=0,t=10,s={}){return"number"!=typeof e||"number"!=typeof t||"object"!=typeof s?(console.log("Incorrect getPhotoPosts params"),!1):this.arr.filter(e=>(!(s.authors instanceof Array)||s.authors.includes(e.author))&&(!(s.tags instanceof Array)||s.tags.every(t=>e.tags.includes(t)))&&(!(s.startDate instanceof Date)||e.publDate>=s.startDate)&&(!(s.endDate instanceof Date)||e.publDate<=s.endDate)).slice(e,e+t)}getPhotoPost(e){return this.arr.find(t=>t._id===e)}editPhotoPost(e,t){const s=this.arr.findIndex(t=>t._id===e);if(-1===s)return console.log("No posts with such ID"),!1;const n=Object.create(this.arr[s].__proto__);for(let e in this.arr[s])n[e]=this.arr[s][e];const o=["description","author","publDate","likes","photoLink"];for(let e of o)n[e]=void 0!==t[e]?t[e]:n[e];return n.tags=n.description.match(/#[^\s#]*/g),n.validate()?(this.arr[s]=n,!0):(console.log("Incorrect post editing"),!1)}removePhotoPost(e){let t=this.arr.findIndex(t=>t._id===e);return-1===t?(console.log("No posts with such ID"),!1):(this.arr.splice(t,1),!0)}}}},function(e,t,s){const n=s(0),o=new(0,s(1).PhotoPosts);o.addPost(new n("lol","2018-02-23T23:02:42","asdasd#asfa asfa#efef#grgrd ","https://78.media.tumblr.com/cb2aeea6b06506af90614ee65e3fd3d2/tumblr_p282pi0P4m1rrgyf5o1_500.png",["kek"])),o.addPost(new n("kek","2018-02-23T22:01:40","asfaf#fdfd #adfad#rrr","https://uc.uxpin.com/files/839015/832598/image-612fd1.png",["lol","kek"])),o.addPost(new n("lol","2018-02-22T01:11:42","#devil#paradise#beast","https://sun9-9.userapi.com/c840623/v840623468/1f6cd/ABOJjQ_oAlU.jpg",["lol","kek"])),o.addPost(new n("shpek","2018-02-21T23:59:43","My first#post","https://pp.userapi.com/c626926/v626926297/244ab/_KYYeq2Nivw.jpg",["lol","kek"])),o.addPost(new n("shrek","1999-09-09T12:02:12","Very #smart#clever person #Mum_loves_me#50$per_hour","https://pp.userapi.com/c621324/v621324944/3fb6/jAcu42c-mVY.jpg",["lol","kek"])),o.addPost(new n("dasha","2018-02-25T12:00:45","#description","https://pp.userapi.com/c625831/v625831944/38e51/5wu5nd3TFqo.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-25T14:45:59","#asfa#fdfd","https://pp.userapi.com/c622831/v622831944/1c8ce/ow1DC8X0lQM.jpg",["lol","kek"])),o.addPost(new n("drop database","2018-02-22T15:43:22","#fa af adfa #dgdg","https://pp.userapi.com/c618226/v618226297/1da36/KOvMdDcV3T0.jpg",["lol","kek"])),o.addPost(new n("kate","2018-02-20T13:25:43","fabfupevpb#kjfj #dfs lkdfn","https://pp.userapi.com/c421430/v421430297/fe0/JR7AmF0xWg4.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:43","fdaf#asfa","https://pp.userapi.com/c629414/v629414080/520f4/eU-L3npmObs.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:44","fdaf#asfa","https://pp.userapi.com/c638224/v638224080/6cda/BvendCuLhB4.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:45","fdaf#asfa","https://pp.userapi.com/c841325/v841325428/242cd/l39QUVI4erU.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:46","fdaf#asfa","https://pp.userapi.com/c638824/v638824080/1a2d8/GoHGM08uMu8.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:47","fdaf#asfa","https://pp.userapi.com/c638226/v638226080/ff4a/HIPjO6PFYLM.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:48","fdaf#asfa","https://pp.userapi.com/c604417/v604417080/2dc92/gUrjk0bZsT4.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:49","fdaf#asfa","https://pp.userapi.com/c638225/v638225080/982/PTWcdR83WpQ.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:50","fdaf#asfa","https://pp.userapi.com/c629130/v629130080/cd33/alQtFoA__J0.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:51","fdaf#asfa","https://pp.userapi.com/c621324/v621324944/3fb6/jAcu42c-mVY.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:52","fdaf#asfa","https://pp.userapi.com/c621324/v621324944/3fb6/jAcu42c-mVY.jpg",["lol","kek"])),o.addPost(new n("lol","2018-02-20T12:24:53","fdaf#asfa","https://pp.userapi.com/c621324/v621324944/3fb6/jAcu42c-mVY.jpg",["lol","kek"]));let a,r="lol";function i(e){const t=document.getElementsByTagName("ul")[0];if(e&&"object"==typeof e&&(t.innerHTML="",document.getElementsByTagName("button")[0].style="display:static",a=(()=>{let t=0;return function(){return t+=5,o.getPhotoPosts(t-5,5,e)}})()),"function"!=typeof a)return!1;const s=a();for(let e=0;e<s.length;e++)t.appendChild(l(s[e]));return s.length<5&&(document.getElementsByTagName("button")[0].style="display:none"),!0}function l(e){if(!(e instanceof n))return null;const t=document.createElement("li");return t.id=`post${e._id}`,t.innerHTML=`<header class="userInfo flex">\n            <a href="#">\n                <img class="userAvatar" src="https://uc.uxpin.com/files/839015/832598/image-612fd1.png">\n            </a>\n            <a class="username" href="#"><b>${e.author}</b></a>\n            ${r===e.author?'<div class="editDelete">\n                <a href="#">\n                    <i class="material-icons">edit</i>\n                </a>    \n                <div class="editDeletePopup">\n                    <a href="#" class="editDeleteMenuItem">Edit</a>\n                    <a href="#" class="editDeleteMenuItem">Delete</a>\n                </div>\n            </div>':""}\n        </header>\n        <img class="photo" src="${e.photoLink}">\n        <a href="#" class="star">\n            <i class="material-icons font40"${e.likes.includes(r)?'style="color:red"> favorite':">favorite_border"}</i>\n        </a>\n        <div class="amountOfLikes">\n            <i><b>${e.likes.length} likes</b></i>\n        </div>\n        <div class="comment">\n            <a class="username" href="#"><b>${e.author}:</b></a>\n            <span>${e.description}</span>\n        </div>\n        <span class="publDate">${e.publDate.toLocaleString()}</span>`,t.childNodes[4].childNodes[1].addEventListener("click",d),t}function d(e){if(e.preventDefault(),!r)return;const t=Number.parseInt(e.target.parentNode.parentNode.id.substr(4),10),s=o.getPhotoPost(t.toString());if(!s)return;let n=s.likes.indexOf(r);-1===n?(s.likes.push(r),e.target.style="color:red",e.target.innerHTML="favorite"):(s.likes.splice(n,1),e.target.style="color:black",e.target.innerHTML="favorite_border"),e.target.parentNode.nextSibling.nextSibling.innerHTML=`<i><b>${s.likes.length} likes</i></b>`}document.getElementById("body").innerHTML=`\n    <header class="header flex">\n            <div class="headerDiv center flex">\n                <a href="#" class="logo flex">\n                    <img class="logoImage" src="https://uc.uxpin.com/files/839015/832598/image-612fd1.png">\n                    <div class="verticalLine"></div>\n                    <p class="appName"><b>Ugagram</b></p>\n\n                </a>\n                <div class="search flex">\n                    <div class="help">You may search for A's and B's post, tagged with #c#d via typing "A B #c#d"</div>\n                    <input class="filterByTagAndName center" type="text" placeholder="Search">\n                    <div class="dateRange flex">\n                        <i class="material-icons center font30">date_range</i>\n                        <div class="dateInputs">\n                            <i>from:</i>\n                            <input type="date">\n                            <i>to:</i>\n                            <input type="date">\n                        </div>                \n                    </div>\n                    \n                    \n                </div>\n                <div class="userButtons flex">\n                    <a href="#">\n                        <i class="font40 center"><b>+</b></i>\n                    </a>\n                    <div class="editDelete">\n                        <a href="#">\n                            <i class="material-icons font40 center accountPopup">\n                                person\n                            </i>\n                        </a>\n                        <div class="profilePopup">\n                            ${r?`<b>${r}</b>\n                            <a href="#" class="editDeleteMenuItem">Edit profile</a>\n                            <a href="#" class="editDeleteMenuItem">Logout</a>`:'<a href="#" class="editDeleteMenuItem">Login</a>'}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </header>\n        <div class="content">\n        </div>\n        <footer class="flex">\n                <div class="logo flex">\n                    <p class="appName"><b>Ugagram</b></p>\n                </div>\n                <div class="footerInfo">\n                    <p>All content c 2018 Alexander Kovalchuk</p>\n                    <p>FAMCS, group 5</p>\n                    <p>last update: 05.03.2018</p>\n                </div>\n                <div class="contacts">\n                    <p>Contact Email: <b>skateray17@gmail.com</b></p>\n                </div>\n        </footer>\n    `,document.getElementsByClassName("content")[0].innerHTML='<ul class="flex"></ul>\n        <button class="uploadOlder" onclick="skatLib.addPosts()">Show older photos</button>',i({}),e.exports={addPosts:i,addPost:function(e){if(o.addPost(e)){let t=o.arr.indexOf(e),s=document.getElementsByTagName("ul")[0];return t<s.childNodes.length&&s.insertBefore(l(e),s.childNodes[t]),!0}return!1},editPhotoPost:function(e,t){if(o.editPhotoPost(e,t)){const t=document.getElementById(`post${e}`);return t&&document.getElementsByTagName("ul")[0].replaceChild(l(o.getPhotoPost(e)),t),!0}return!1},removePhotoPost:function(e){if(o.removePhotoPost(e)){const t=document.getElementById(`post${e}`);return t&&document.getElementsByTagName("ul")[0].removeChild(t),!0}return!1},photoPosts:o,getFilteredAdd:function(e={}){let t=0;return function(){return t+=5,o.getPhotoPosts(t-5,5,e)}},PhotoPost:n}}]);